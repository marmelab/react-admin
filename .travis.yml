dist: bionic
services: xvfb

language: node_js
node_js:
    - 'lts/*'

addons:
    chrome: stable

env:
    global:
        - DISPLAY=:99.0
        - NODE_ENV=test

cache:
    yarn: true
    directories:
        - ~/.cache

before_install:
    - curl -o- -L https://yarnpkg.com/install.sh | bash
    - source ~/.bashrc

script: xvfb-run --server-args="-ac -screen 0 1280x1024x16" make test

branches:
    only:
        - master
        - next
